<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login / Register</title>
<style>
  :root {
    --bg:#0f172a;
    --card:#111827;
    --accent:#22c55e;
    --accent2:#60a5fa;
    --text:#e5e7eb;
    --muted:#9ca3af;
  }
  *{box-sizing:border-box;font-family:system-ui,Segoe UI,Arial;}
  body{
    margin:0;
    background:linear-gradient(135deg,#0b1024,#111827);
    color:var(--text);
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .card{
    width:360px;
    background:var(--card);
    padding:22px;
    border-radius:16px;
    box-shadow:0 10px 35px rgba(0,0,0,.4);
  }
  h2{margin:0 0 10px;}
  label{display:block;margin-top:12px;font-size:.9rem;}
  input{
    width:100%;
    padding:10px;
    border-radius:10px;
    border:1px solid #374151;
    background:#020617;
    color:var(--text);
    margin-top:6px;
  }
  button{
    width:100%;
    padding:10px;
    border:none;
    border-radius:12px;
    color:white;
    cursor:pointer;
    margin-top:14px;
  }
  .primary{background:var(--accent);}
  .secondary{background:var(--accent2);}
  .tabs{display:flex;gap:6px;margin-bottom:12px;}
  .tab{
    flex:1;
    text-align:center;
    padding:8px;
    border-radius:10px;
    background:#020617;
    cursor:pointer;
  }
  .active{background:#60a5fa;}
  .hidden{display:none;}
  .status{margin-top:10px;font-weight:600;color:var(--muted);}
</style>
</head>
<body>

<div class="card">
  <div class="tabs">
    <div class="tab active" id="tabLogin">Login</div>
    <div class="tab" id="tabRegister">Register</div>
  </div>

  <!-- LOGIN -->
  <div id="loginPanel">
    <h2>Login</h2>
    <label>Email</label>
    <input type="email" id="loginEmail" />
    <label>Password</label>
    <input type="password" id="loginPassword" />
    <button class="primary" id="loginBtn">Login</button>
    <div id="loginStatus" class="status"></div>
  </div>

  <!-- REGISTER -->
  <div id="registerPanel" class="hidden">
    <h2>Create Account</h2>
    <label>Email</label>
    <input type="email" id="regEmail" />
    <label>Password</label>
    <input type="password" id="regPassword" />
    <button class="secondary" id="registerBtn">Register</button>
    <div id="regStatus" class="status"></div>
  </div>
</div>

<!-- Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { 
    getAuth, 
    createUserWithEmailAndPassword, 
    signInWithEmailAndPassword,
    onAuthStateChanged
  } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCwhZf8p7oL-o5A25IABMr1w9FYSoUTPZg",
    authDomain: "groupymovie.firebaseapp.com",
    projectId: "groupymovie",
    storageBucket: "groupymovie.firebasestorage.app",
    messagingSenderId: "391687787452",
    appId: "1:391687787452:web:025fe4654afeb0f6eed1b9"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // TAB SWITCHING
  const tabLogin = document.getElementById('tabLogin');
  const tabRegister = document.getElementById('tabRegister');
  const loginPanel = document.getElementById('loginPanel');
  const registerPanel = document.getElementById('registerPanel');

  tabLogin.addEventListener('click', ()=>{
    tabLogin.classList.add('active');
    tabRegister.classList.remove('active');
    loginPanel.classList.remove('hidden');
    registerPanel.classList.add('hidden');
  });

  tabRegister.addEventListener('click', ()=>{
    tabRegister.classList.add('active');
    tabLogin.classList.remove('active');
    registerPanel.classList.remove('hidden');
    loginPanel.classList.add('hidden');
  });

  // REGISTER
  document.getElementById("registerBtn").addEventListener("click", ()=>{
    const email = document.getElementById("regEmail").value;
    const password = document.getElementById("regPassword").value;
    const status = document.getElementById("regStatus");

    createUserWithEmailAndPassword(auth, email, password)
      .then(()=>{ status.textContent = "Account created!"; })
      .catch(e=>{ status.textContent = e.message; });
  });

  // LOGIN
  document.getElementById("loginBtn").addEventListener("click", ()=>{
    const email = document.getElementById("loginEmail").value;
    const password = document.getElementById("loginPassword").value;
    const status = document.getElementById("loginStatus");

    signInWithEmailAndPassword(auth,email,password)
      .then(()=>{ window.location.href = "mainpage.html"; })
      .catch(e=>{ status.textContent = e.message; });
  });

  // AUTO REDIRECT IF LOGGED IN
  onAuthStateChanged(auth, user=>{
    if(user){ window.location.href = "mainpage.html"; }
  });
</script>

</body>
</html>
